\documentclass[letter,10pt]{article}

\usepackage{tikz,pgflibraryshapes}
\usetikzlibrary{arrows, calc, decorations.pathmorphing}
\usepackage[psfixbb,graphics,tightpage,active]{preview}

\PreviewEnvironment{tikzpicture}
\newlength{\imagewidth}
\newlength{\imagescale}

\usepackage{xcolor}
\usepackage{color}
\usepackage{amsmath}


\definecolor{orange}{RGB}{255,127,0}
\definecolor{gris}{RGB}{230,230,230}

\usetikzlibrary{shapes,arrows}
\pgfdeclarelayer{background}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}
\tikzstyle{startstop} = [rectangle, rounded corners, minimum width=3cm, minimum height=1.5cm,text centered, draw=black, fill=white!30,double]

\tikzstyle{circulo} = [circle, rounded corners, minimum width=1cm, minimum height=1cm,text centered, draw=black, fill=white!30,sloped]

\tikzstyle{pattern} = [rectangle, rounded corners, minimum height=0.6cm,text centered, draw=black, fill=white!30,text width=1cm]

\tikzstyle{pat} = [rectangle, rounded corners, minimum height=0.6cm,text centered, draw=black, fill=white!30,text width=1cm,double]

\tikzstyle{objseg} = [rectangle, rounded corners, minimum height=0.6cm,text centered, draw=black, fill=white!30,text width=2.5cm]

\tikzstyle{amenazas} = [rectangle, rounded corners, minimum height=0.6cm,text centered, draw=black, fill=white!30,text width=1cm]



\tikzstyle{arrow} = [thick,->,>=stealth]
\tikzstyle{arrow1} = [thick,<-,>=stealth]

\begin{document}

\begin{tikzpicture}[]
	
	\node (Int) [objseg,xshift=-5cm] {Integridad};
	\node () [right of=Int,xshift=1cm]{$I=\frac{0}{3}$};

	
	\node (Conf) [objseg] {Confidencialidad};
	\node (req3) [circulo,above of=Conf,yshift=1cm] {$Req_3$};
	\node () [right of=Conf,xshift=1cm]{$C=\frac{1}{3}$};

	
	\node (Dis) [objseg,xshift=5cm] {Disponibilidad};
	\node () [right of=Dis,xshift=1cm]{$D=\frac{0}{3}$};

	
	\node (Resp) [objseg,xshift=10cm] {Responsabilidad};
	\node (susResp) [draw=none,fill=none,above of=Resp,yshift=1cm] {};
	\node (req1) [circulo,left of=susResp] {$Req_1$};
	\node (req2) [circulo,right of=susResp] {$Req_2$};
	\node () [right of=Resp,xshift=1cm]{$R=\frac{2}{3}$};
		
	\node (w1) [draw=none,fill=none,below of=Int,yshift=-1cm] {$w_I$};
	\node (w2) [draw=none,fill=none,below of=Conf,yshift=-1cm] {$w_C$};
	\node (w3) [draw=none,fill=none,below of=Dis,yshift=-1cm] {$w_D$};
	\node (w4) [draw=none,fill=none,below of=Resp,yshift=-1cm] {$w_R$};
	
	
	\draw [thick] (Int) -- node[pos=1.15,right,xshift=8]{$=0$} (w1);
	\draw [thick] (Conf) -- node[pos=1.15,right,xshift=8]{$=\frac{\frac{3}{5} \cdot 1 + \frac{2}{5} \cdot 1}{\frac{3}{5}+\frac{2}{5}}=1$} (w2);
	\draw [thick] (Dis) -- node[pos=1.15,right,xshift=8]{$=0$} (w3);
	\draw [thick] (Resp) -- node[pos=1.15,right,xshift=8]{$=\frac{\frac{3}{5} \cdot 1 + \frac{1}{5} \cdot 1 + \frac{2}{5} \cdot 1}{\frac{3}{5}+\frac{1}{5}+\frac{2}{5}}=1$} (w4);
		

	\draw [arrow] (req3) -- (Conf);
	\draw [arrow] (req1) -- (Resp);
	\draw [arrow] (req2) -- (Resp);

	
	
	
	\node (susInt_a) [draw=none,fill=none,below of =w1,yshift=-1cm] {};
	\node (susConf_a) [draw=none,fill=none,below of =w2,yshift=-1cm] {};	
	\node (T12) [amenazas,left of=susConf_a,xshift=-0.2cm] {$T_{12}$};
	\node (T15) [amenazas,right of=susConf_a,xshift=0.2cm] {$T_{15}$};
	\node (T13) [amenazas,below of =w4,yshift=-1cm] {$T_{13}$};
	\node (T11) [amenazas,left of=T13,xshift=-1cm] {$T_{11}$};
	\node (T14) [amenazas,right of=T13,xshift=1cm] {$T_{14}$};
	
	


	\draw [arrow1] (w2) -- node [pos=0.84,left] {$\alpha=\frac{3}{5}$} (T12);
	\draw [arrow1] (w2) -- node [pos=0.84,right] {$\alpha=\frac{2}{5}$} (T15);
	\draw [arrow1] (w4) -- node [pos=0.84,left] {$\alpha=\frac{3}{5}$} (T11);
	\draw [arrow1] (w4) -- node [pos=0.84,left] {$\alpha=\frac{1}{5}$} (T13);
	\draw [arrow1] (w4) -- node [pos=0.84,right] {$\alpha=\frac{2}{5}$} (T14);
	

	\node (pat1) [pat,below of=T12,yshift=-2cm] {$Pat_1$};
	\node (pat1_1) [pat,below of=T15,yshift=-2cm] {$Pat_1$};
	\node (pat3) [pat,below of=T11,yshift=-2cm] {$Pat_3$};
	\node (pat2) [pat,below of=T11,yshift=-3cm] {$Pat_2$};
	\node (pat4) [pat,below of=T13,yshift=-2cm] {$Pat_4$};
	\node (pat4_1) [pat,below of=T14,yshift=-2cm] {$Pat_4$};


	\draw [dotted,thick] (pat1) -- node[pos=0.1,left] {$v_p=1$}(T12);
	\draw [dotted,thick] (pat1_1) -- node[pos=0.1,left] {$v_p=1$}(T15);
	\draw [dotted,thick] (pat3) -- node[pos=0.1,left] {$v_p=1$}(T11);
	\draw [dotted,thick] (pat4) -- node[pos=0.1,left] {$v_p=1$}(T13);
	\draw [dotted,thick] (pat4_1) -- node[pos=0.1,left] {$v_p=1$}(T14);


	\begin{pgfonlayer}{background}
		\path (susInt_a.west |- susInt_a.north)+(-1.5,0.8) node (a) {};
		\path (T14.east |- T14.south)+(+0.5,-0.3) node (c) {};
            	\path[fill=gris!20,rounded corners, draw=black,double] (a) rectangle (c);  
    	\end{pgfonlayer}

\end{tikzpicture}



\end{document}